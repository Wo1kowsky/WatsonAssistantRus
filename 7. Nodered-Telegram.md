# Лабораторная работа №7. Интеграция Watson Assistant и Telegram с использованием Node-red

  - [1. Установка Node-red](#установка-node-red)
      - [section1](#package-control)
      - [section2](#manual-installation)
  - [2. Развертывание сервисов Watson](#развертывание-сервисов-watson)
      - [Watson Assistant - чат-бот платформа](#markdown-features)
      - [Watson Visual Recognition](#wiki-features)
      - [Watson Language Translator](#wiki-features)
  - [3. Создание бота Telegram](#создание-бота-telegram)
  - [4. Конфигурация Node-red](#конфигурация-node-red)

## 1. Установка Node-red

Зайдите в Ваш каталог сервисов IBM Cloud
https://console.bluemix.net/catalog/

Наберите "node-red" в поле поиска catalog
![поиск node-red](images/7-nodered-search.png)

Нажмите "Node-RED Starter"
![node-red starter](images/7-nodered-starter.png)

Введите имя для сервиса Node-RED (должно быть уникально) в поле App name:
![node-red starter](images/7-nodered-appname.png)

Оставьте остальные поля без изменения и нажмите кнопку Create. Вы увидите, что сервис начнет развертывание:
![node-red starting](images/7-nodered-starting.png)

Пока сервис продолжает развертывание, продолжите создание других необходимых сервисов. Вы можете контролировать процесс развертывания с помощью секции Logs:
![node-red logs](images/7-nodered-logs.png)

## 2. Развертывание сервисов Watson
Нам понадобятся следующие сервисы Watson:
- IBM Watson Assistant
- IBM Watson Visual Recognition
- IBM Language Translator

### 2.1. Создайте сервис IBM Watson Assistant
Откройте экран конфигурации IBM Watson Assistant (созданного ранее)


### 2.2. Создайте сервис IBM Watson Visual Recognition
Зайдите в Ваш каталог сервисов IBM Cloud
https://console.bluemix.net/catalog/

Выберите категорию AI - Visual Recognition
Придумайте Service name (например, **MyVisualRecognition**), или оставьте как есть.
Нажмите Create.

На экране сервиса Появится секция "Credentials" на закладке "manage". Сохраните эти значения (API Key и URL).

![node-red logs](images/7-nodered-vr-screen.png)

### 2.3. Создайте сервис IBM Language Translator
Зайдите в Ваш каталог сервисов IBM Cloud
https://console.bluemix.net/catalog/

Выберите категорию AI - Language Translator
Придумайте Service name (например, **MyLanguageTranslator**), или оставьте как есть.
Нажмите Create.

Вы будете перенаправлены на общую страницу списка сервисов. Теперь нажмите на сервис и сохраните API Key и Url:

![node-red logs](images/7-nodered-lt-screen.png)


## 3. Создадим бота Telegram
Для создания бота:
- откройте ваше приложение Telegram и найдите в нем бота под названием "BotFather". Отправьте ему команду "/newbot".
- придумайте название для своего бота и отправьте его в ответ BotFather. В ответ придет сообщение с токеном - это ключ для доступа к вашему боту. Сохраните этот ключ (отправьте его, например, себе по электронной почте) - он понадобится для конфигурации позже.

## 4. Конфигурация Node-red
Перейдите в Ваш список сервисов IBM Cloud:
https://console.bluemix.net/dashboard/apps
Найдите в списке сервисов сервис Node-RED, который был создан на шаге 1. Нажмите на него.
Убедитесь, что сервис запущен (Статус = Running).
![node-red running](images/7-nodered-nr-status.png)

Установите на вкладке Runtime значение MB MEMORY PER INSTANCE в 512 MB. Нажмите Save.
![node-red running](images/7-nodered-nr-512mb.png)

Нажмите ссылку "Visit App URL"

Вы попали на страницу конфигурации Node-RED. Нажмите Next.
Придумайте и введите имя пользователя и пароль для доступа к конфигурации сервиса.
![node-red running](images/7-nodered-nr-password.png)

Нажмите Next - Next - Finish.

Нажмите кнопку Go to your Node-RED flow editor
![node-red running](images/7-nodered-button.png)

Введите имя и пароль

Вы увидите экран конфигурации Node-RED:
![node-red running](images/7-nodered-mainscreen.png)
